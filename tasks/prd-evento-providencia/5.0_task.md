# 5.0 - Integração, Auditoria e Testes

## Objetivo
- Concluir a integração entre a tela de upload e o modal de análise, garantindo que todo o fluxo seja auditado.

## Escopo / Entregáveis
- Alterações na tela `upload.html`.
- Registro completo na tabela `auditoria_sugestao`.
- Relatório de testes de aceitação.

## Passos e subtarefas
- 5.1 Inserir botão "Analisar" em cada card de publicação na tela de upload.
- 5.2 Implementar lógica de persistência do log de auditoria no backend (comparando sugestão vs decisão).
- 5.3 Atualizar o status da publicação para "analisado" após o salvamento.
- 5.4 Realizar teste de fluxo completo: Upload -> Extração -> Sugestão -> Edição -> Salvamento -> Auditoria.

## Dependências
- 4.0 (Modal de Análise) concluído.

## Paralelizável?
- Não, é a fase final de amarração.

## Critérios de aceite
- O botão "Analisar" abre o modal com o contexto correto da publicação.
- A tabela `auditoria_sugestao` contém os dados JSON de decisão final.
- O sistema reflete visualmente que a publicação já foi analisada.

## Testes
- Teste ponta-a-ponta (E2E) simulando a jornada completa do advogado.
- Verificação de logs no banco de dados após ações no frontend.

## Notas
- Atenção ao tratamento de erros: se a auditoria falhar, a transação deve ser revertida.

# 1.0 - Migrações de Banco de Dados

## Objetivo
- Criar a estrutura de tabelas necessária para suportar checklists de providências e o vínculo de múltiplos modelos de petição.

## Escopo / Entregáveis
- Script SQL de migração para criação das tabelas `providencia_checklist` e `providencia_modelo`.
- Índices de performance para busca por `tenant_id` e `providencia_id`.

## Passos e subtarefas
- 1.1 Criar tabela `public.providencia_checklist` com campos: id, providencia_id, ordem, titulo, descricao, obrigatorio, tenant_id, created_at, updated_at.
- 1.2 Criar tabela `public.providencia_modelo` (tabela intermediária) com campos: id, providencia_id, modelo_id, tenant_id, created_at.
- 1.3 Adicionar restrições de chave estrangeira (FK) com `on delete cascade` para `providencia_id` e `modelo_id`.
- 1.4 Criar índice `providencia_checklist_providencia_idx` em `(tenant_id, providencia_id)`.
- 1.5 Criar restrição de unicidade em `providencia_modelo` para `(providencia_id, modelo_id, tenant_id)`.

## Dependências
- Acesso ao Supabase/PostgreSQL.

## Paralelizável?
- Sim, pode ser executado em paralelo com a criação do boilerplate de backend (2.0).

## Critérios de aceite
- Tabelas criadas com sucesso no banco de dados.
- Chaves estrangeiras e índices funcionando conforme especificado.
- Isolamento por `tenant_id` garantido pelas colunas obrigatórias.

## Testes
- 1.6 Verificar se é possível inserir itens de checklist vinculados a uma providência existente.
- 1.7 Verificar se a deleção de uma providência remove automaticamente seus itens de checklist e vínculos de modelo.

## Notas
- Seguir o padrão de DDL definido no PRD e Tech Spec.

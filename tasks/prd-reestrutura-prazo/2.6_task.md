# 2.6_task - Implementar Lógica de Auditoria e Status

## Objetivo
- Garantir que toda alteração de status de um prazo seja devidamente registrada para fins de auditoria.

## Escopo / Entregáveis
- Implementação de trigger no banco ou lógica no Service para registrar mudanças em `prazo_auditoria`.
- Novos métodos para atualização de status.

## Passos e subtarefas
- [ ] 2.6.1: Criar método `atualizarStatusPrazo` em `processosService.js`.
- [ ] 2.6.2: Implementar a gravação na tabela `prazo_auditoria` sempre que o `status_id` for alterado.
- [ ] 2.6.3: (Opcional) Criar trigger no PostgreSQL para garantir a auditoria a nível de banco de dados.

## Dependências
- [x] Task 1.1 (Tabela de auditoria criada).
- [x] Task 2.1 (Service base atualizado).

## Paralelizável?
- Parcialmente, após a base da Task 2.1 estar pronta.

## Critérios de aceite
- Cada mudança de status gera exatamente um registro na tabela `prazo_auditoria`.
- O registro de auditoria contém o status anterior, o novo, o usuário e o timestamp.

## Testes
- Alterar o status de um prazo e verificar se um novo registro apareceu na tabela de auditoria.
- Validar se o `usuario_id` está sendo capturado corretamente do contexto da sessão.

## Notas
- A auditoria é um requisito crítico para a controladoria jurídica.
